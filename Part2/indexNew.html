<!DOCTYPE html>
<html lang="en">
 <head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <meta http-equiv="X-UA-Compatible" content="ie=edge" />
   <title>Vue Lab</title>
   <link
     rel="stylesheet"    href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
     crossorigin="anonymous"
   />
 </head>
 <body>

    <div class="jumbotron">
        <h1 class="display-4">Hello, world!</h1>
        <p class="lead">This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.</p>
        <hr class="my-4">
        <p>It uses utility classes for typography and spacing to space content out within the larger container.</p>
         <a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a>
        </div>
    
    <!-- app.message = "Whatever!"  - in web console -->
    <div class="container">
      <div id="app">
        Message: {{ message }}
      </div>
    </div>

   <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" 
   integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" 
   crossorigin="anonymous"></script>
   <script
   src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
   integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
   crossorigin="anonymous"></script>
 <script
   src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
   integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
   crossorigin="anonymous"></script>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

  <script>   
    const app = new Vue({
      el: '#app',
      data: {
        message: 'Hello Vue!'
      }
    })
  </script>
<!-- To do list ex
<div id="todo-list-example">
  <form v-on:submit.prevent="addNewTodo">
    <label for="new-todo">Add a todo</label>
    <input
      v-model="newTodoText"
      id="new-todo"
      placeholder="E.g. Feed the cat"
    >
    <button>Add</button>
  </form>
  <ul>
    <li
      is="todo-item"
      v-for="(todo, index) in todos"
      v-bind:key="todo.id"
      v-bind:title="todo.title"
      v-on:remove="todos.splice(index, 1)"
    ></li>
  </ul>
</div>
-->

<!-- combine todo list ex and stops-->
<div id="stopList">
  <form v-on:submit.prevent="addNewTodo">
    <label for="new-todo">Add a stop</label>
    <input
      id="new-todo"
      placeholder="placeholder"
    >
    <button>Add</button>
  </form>
  <ul>
    <li
      is="todo-item"
      v-for="(todo, index) in todos"
      v-bind:key="todos.id"
      v-on:remove="todos.splice(index, 1)"
    > {{ todo }} </li>
  </ul>
</div>

  <!-- stops property 
  <script>
 let stops = new Vue({
  el: '#stopList',
  data: {
    stopList: [    ]
  }, 
  created: function () {
    // `this` points to the vm instance
    console.log('a is: ' + this.a)
    
  }

})
  </script>

  -->

  <!--Todo list test
  <script>
  Vue.component('todo-item', {
    template: '\
      <li>\
        {{ title }}\
        <button v-on:click="$emit(\'remove\')">Remove</button>\
      </li>\
    ',
    props: ['title']
  })
  
  new Vue({
    el: '#todo-list-example',
    data: {
      newTodoText: '',
      todos: [
        {
          id: 1,
          title: 'Do the dishes',
        },
        {
          id: 2,
          title: 'Take out the trash',
        },
        {
          id: 3,
          title: 'Mow the lawn'
        }
      ],
      nextTodoId: 4
    },
    methods: {
      addNewTodo: function () {
        this.todos.push({
          id: this.nextTodoId++,
          title: this.newTodoText
        })
        this.newTodoText = ''
      }
    }
  })
  </script>
    -->

  <!--combine todolist and stops-->
  <script>
    Vue.component('todo-item', {
      template: '\
        <li>\
          {{ title }}\
          <button v-on:click="$emit(\'remove\')">Remove</button>\
        </li>\
      ',
      props: ['title']
    })
    
    let stops = new Vue({
      el: '#stopList',
      data: {
        todos: [{
            id:	0,
            name:	"default",
            code:	"default",
            description:	"default",
            lat:	0,
            lon:	0,
            buddy:	null,
            fields:	{},
            distance:	0
          }]
      },
    mounted: function(){
         // fetch request ex: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch
         // This part should be done in mounted life-cycle hook so that it is executed when this Vue
         // object reaches mounted stage. Then, you can just assign the JSON array to the variable.
         fetch('https://utils.pauliankline.com/stops.json')
           .then(function(response) {
             return response.json();
           })
           .then(function(myJson) {
             console.log(JSON.stringify(myJson));
             //stops.addNewTodo();
             stops.todos = myJson;
           });
         // Alternate solution to assigning is to use arrow function operator, since arrow function does
         // not have "this", then "this" will refer to the parent's "this", which is the Vue object's "this".
         // If you use function(myJson) {} instead, then the function will have its own "this" and will assign
         // to its own "this" instead of the parent's "this".

         /*
          .then((myJson) => {
             this.todos = myJson;
           });
         */

    }
    })
    </script>


</body>
</html>
